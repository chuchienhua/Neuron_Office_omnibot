<?xml version="1.0"?>
<launch>
	<arg name="visualize" default="false" />

	<node pkg="tf" type="static_transform_publisher" name="scanner1_to_base" args="0.1 0.0 0.4 0.0 0.0 0.0 base_link laser_1 100" />
	<node pkg="tf" type="static_transform_publisher" name="scanner2_to_base" args="0 0 0.125 3.1415926535 0 0 base_link laser_2 100" />
	<node pkg="tf" type="static_transform_publisher" name="lase_to_base" args="0 0 0 0 0 0 base_link base_laser 100" />
	<node pkg="urg_node" type="urg_node" name="urg_node">
		<!-- <param name="ip_address" value="192.168.0.100"/> -->
		<param name="frame_id" value="laser_1"/>
		<param name="min_ang" value="-2.356194"/>
		<!-- <param name="min_ang" value="-1.64194"/> -->
		<param name="max_ang" value="2.356194"/>
		<!-- <param name="max_ang" value="1.646194"/> -->
		<param name="connect_timeout" value="10.0"/>
		<remap from="scan" to="scan_1" />
		<remap from="cloud" to="cloud_1" />
	</node>
	<node name="ydlidar_node"  pkg="ydlidar"  type="ydlidar_node" output="screen" respawn="false">
		<param name="port"         type="string" value="/dev/ydlidar"/>  
		<param name="baudrate"     type="int"    value="128000"/>
		<param name="frame_id"     type="string" value="laser_2"/>
		<param name="reversion"    type="bool"   value="false"/>
		<param name="angle_fixed"  type="bool"   value="true"/>
		<param name="intensities"  type="bool"   value="false"/>
		<param name="angle_min"    type="double" value="-90" /> <!-- front -->
		<param name="angle_max"    type="double" value="90" /> <!-- front -->
		<param name="range_min"    type="double" value="0.17" /> <!-- for omnibot -->
		<param name="range_max"    type="double" value="10.0" />
		<param name="ignore_array" type="string" value="" />
		<param name="resolution_fixed"    type="bool"   value="true"/>
		<param name="samp_rate"    type="int"    value="20"/>
		<param name="frequency"    type="double" value="20"/>
		<remap from="scan" to="scan_2" />
		<remap from="cloud" to="cloud_2" />
	</node>
	<node pkg="ira_laser_tools" name="laserscan_multi_merger" type="laserscan_multi_merger" output="screen">
		<param name="destination_frame" value="base_laser" />
		<param name="cloud_destination_topic" value="cloud" />
		<param name="scan_destination_topic" value="scan" />
		<param name="laserscan_topics" value="/scan_1 /scan_2" />
		<!-- LIST OF THE LASER SCAN TOPICS TO SUBSCRIBE -->
		<param name="angle_min" value="-3.14159" />
		<param name="angle_max" value="3.14159" />
		<param name="angle_increment" value="0.0058" />
		<param name="scan_time" value="0.0333333" />
		<param name="range_min" value="0.19" />
		<param name="range_max" value="100.0" />
	</node>
	
    <group if="$(arg visualize)">	
		<!-- RVIZ -->
		<node type="rviz" name="rviz" pkg="rviz" args="-d $(find tdk_launch)/rviz/laser_merge.rviz" />
	</group>
</launch>
